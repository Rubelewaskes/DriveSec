@model (List<DriveSec.Models.File> Files, List<DriveSec.Models.Folder> Folders)


@{
    ViewData["Title"] = "Home Page";
}

<div class="text-center">
    <h1 class="display-4">Welcome</h1>
    @if (ViewData["SuccessMessage"] != null)
    {
        <p class="text-success">@ViewData["SuccessMessage"]</p>
    }
    @if (ViewData["SuccessMessage"] != null)
    {
        <p class="text-danger">@ViewData["ErrorMessage"]</p>
    }

    @if (ViewData["UsersData"] != null)
    {
        foreach (var user in ViewData["UsersData"] as List<DriveSec.Controllers.DriveSecController.ChosenViewModel>)
        {
            <p>Вот ваш пользователь, милорд: @user.login</p>
        }
    }


    <h2>Список файлов в папке:</h2>
    <div class="file-container">
        @foreach (var file in Model.Folders)
        {
            <div class="file-item">
                <p>@file.FolderName</p>
            </div>
        }
        @foreach (var file in Model.Files)
        {
            <div class="file-item">
                <p>@file.FileName</p>
                <form method="post" asp-action="DownloadFile" asp-controller="DriveSec">
                    <input type="hidden" name="fileId" value="@file.FileId" />
                    <button type="submit">Скачать</button>
                </form>
                <form method="post" asp-action="DeleteFile" asp-controller="DriveSec">
                    <input type="hidden" name="fileId" value="@file.FileId" />
                    <button type="submit">Удалить</button>
                </form>
            </div>
        }
    </div>

    <br />

    <p>Создать папку</p>

    <form method="post" asp-action="CreateFolder" asp-controller="DriveSec">
    <input type="text" name="folderName" placeholder="Введите имя папки" />
    <button type="submit">Создать</button>
    </form>


    <p>Сюда, загружать файлы, босс</p>
    <form method="post" enctype="multipart/form-data" asp-action="UploadFile" asp-controller="DriveSec">
        <input type="file" name="file" />
        <input type="hidden" name="path" value="ваш_путь" />
        <input type="hidden" name="proc" value="Upload" />
        <button type="submit">Загрузить файл</button>
    </form>

</div>

<style>
    .file-container {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
    }

    .file-item {
        border: 1px solid #ccc;
        padding: 10px;
    }
    
    button{
        margin-top:2px;
        border: 0.5px solid;
    }
</style>